# =============================================================================
# SysArmor EDR 环境配置 - 12-Factor App模式
# =============================================================================

# 部署模式
DEPLOYMENT_MODE=single-node          # single-node, distributed
ENVIRONMENT=development              # development, production

# 网络配置
SYSARMOR_NETWORK=sysarmor-net
EXTERNAL_IP=localhost

# 数据库配置 (PostgreSQL)
POSTGRES_DB=sysarmor
POSTGRES_USER=sysarmor
POSTGRES_PASSWORD=password

# Manager服务 (控制平面)
MANAGER_HOST=manager
MANAGER_PORT=8080
MANAGER_DB_URL=postgres://sysarmor:password@manager-postgres:5432/sysarmor?sslmode=disable
MANAGER_LOG_LEVEL=info

# Middleware服务 (Vector + Kafka)
VECTOR_HOST=middleware-vector
VECTOR_TCP_PORT=6000
VECTOR_API_PORT=8686
VECTOR_METRICS_PORT=9598
KAFKA_HOST=middleware-kafka
KAFKA_INTERNAL_PORT=9092
KAFKA_EXTERNAL_HOST=162.105.126.246
KAFKA_EXTERNAL_PORT=9094
KAFKA_CONTROLLER_PORT=9093
KAFKA_JMX_PORT=9101
KAFKA_JMX_HOSTNAME=middleware-kafka
KAFKA_BOOTSTRAP_SERVERS=middleware-kafka:9092
KAFKA_BROKERS=middleware-kafka:9092
KAFKA_CLUSTER_ID=0203ecef23a24688af6901b94ebafa80

# Prometheus配置
PROMETHEUS_HOST=middleware-prometheus
PROMETHEUS_PORT=9090
PROMETHEUS_URL=http://middleware-prometheus:9090

# Worker配置 (接收rsyslog服务)
WORKER_URLS=middleware-vector:http://middleware-vector:6000:http://middleware-vector:8686/health

# Processor服务 (PyFlink)
FLINK_JOBMANAGER_HOST=processor-jobmanager
FLINK_JOBMANAGER_PORT=8081
FLINK_TASKMANAGER_SLOTS=2
FLINK_PARALLELISM=2
THREAT_RULES_PATH=/app/configs/rules.yaml

# Indexer服务 (OpenSearch)
OPENSEARCH_HOST=indexer-opensearch
OPENSEARCH_PORT=9200
OPENSEARCH_URL=http://indexer-opensearch:9200
OPENSEARCH_USERNAME=admin
OPENSEARCH_PASSWORD=admin
INDEX_PREFIX=sysarmor-events
