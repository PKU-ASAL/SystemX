# SysArmor Manager UI

<div align="center">

**ç°ä»£åŒ–çš„ç«¯ç‚¹æ£€æµ‹ä¸å“åº”ï¼ˆEDRï¼‰ç³»ç»Ÿç®¡ç†ç•Œé¢**

åŸºäº Next.js 15 å’Œ React 19 æ„å»ºçš„ä¼ä¸šçº§å®‰å…¨ç®¡ç†å¹³å°å‰ç«¯é¡µé¢

[![Next.js](https://img.shields.io/badge/Next.js-15.4.5-black?logo=next.js)](https://nextjs.org/)
[![React](https://img.shields.io/badge/React-19.1.0-blue?logo=react)](https://reactjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5-blue?logo=typescript)](https://www.typescriptlang.org/)
[![Tailwind CSS](https://img.shields.io/badge/Tailwind_CSS-4-38B2AC?logo=tailwind-css)](https://tailwindcss.com/)

</div>

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

SysArmor æ˜¯ä¸€ä¸ªå…¨åŠŸèƒ½çš„ç«¯ç‚¹å®‰å…¨ç®¡ç†å¹³å°ï¼Œä¸“ä¸ºç°ä»£ä¼ä¸šå’Œå­¦æœ¯ç ”ç©¶ç¯å¢ƒè®¾è®¡ã€‚å®ƒæä¾›äº†å®Œæ•´çš„å¨èƒæ£€æµ‹ã€ç»ˆç«¯ç®¡ç†ã€æ—¥å¿—åˆ†æå’Œç³»ç»Ÿç›‘æ§åŠŸèƒ½ï¼Œæ”¯æŒæ— ä»£ç†éƒ¨ç½²å’Œå¤š EDR ç³»ç»Ÿé›†æˆã€‚

### ğŸ¯ è®¾è®¡ç†å¿µ

- **å­¦æœ¯å‹å¥½**: æ”¯æŒæ— ä»£ç†éƒ¨ç½²ï¼Œé€‚åº”å­¦æœ¯ç ”ç©¶ç¯å¢ƒçš„é™åˆ¶
- **å·¥ä¸šçº§**: ä¼ä¸šçº§å®‰å…¨åŠŸèƒ½ï¼Œæ»¡è¶³ç”Ÿäº§ç¯å¢ƒéœ€æ±‚
- **ç°ä»£åŒ–**: åŸºäºæœ€æ–°æŠ€æœ¯æ ˆï¼Œæä¾›æµç•…çš„ç”¨æˆ·ä½“éªŒ
- **å¯æ‰©å±•**: æ¨¡å—åŒ–æ¶æ„ï¼Œæ”¯æŒå¤šç§ EDR è§£å†³æ–¹æ¡ˆé›†æˆ

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### ğŸ›¡ï¸ å¨èƒç®¡ç†

- **å®æ—¶å‘Šè­¦ç›‘æ§** - åŸºäº OpenSearch çš„æ™ºèƒ½å¨èƒæ£€æµ‹
- **æ”»å‡»äº‹ä»¶åˆ†æ** - å¤šç»´åº¦å®‰å…¨äº‹ä»¶å¯è§†åŒ–ï¼ˆäº‹ä»¶ã€å›¾è°±ã€æŠ¥å‘Šï¼‰
- **å¨èƒæƒ…æŠ¥é›†æˆ** - é«˜çº§å¨èƒåˆ†æå’Œå“åº”å»ºè®®
- **å®‰å…¨æ€åŠ¿æ„ŸçŸ¥** - å…¨å±€å®‰å…¨çŠ¶æ€ç›‘æ§é¢æ¿

### ğŸ–¥ï¸ ç»ˆç«¯ç®¡ç†

- **çµæ´»éƒ¨ç½²é€‰é¡¹**
  - æ— ä»£ç†éƒ¨ç½²ï¼ˆAgentlessï¼‰- é€‚ç”¨äºå­¦æœ¯ç ”ç©¶ç¯å¢ƒ
  - SysArmor å®Œæ•´æ ˆéƒ¨ç½² - ä¼ä¸šçº§å…¨åŠŸèƒ½ä¿æŠ¤
  - ç¬¬ä¸‰æ–¹ EDR é›†æˆ - å…¼å®¹ Wazuh ç­‰ä¸»æµ EDR è§£å†³æ–¹æ¡ˆ
- **ç»ˆç«¯ç”Ÿå‘½å‘¨æœŸç®¡ç†** - ä»éƒ¨ç½²åˆ°ç›‘æ§çš„å®Œæ•´æµç¨‹
- **æ‰¹é‡æ“ä½œæ”¯æŒ** - é«˜æ•ˆç®¡ç†å¤§è§„æ¨¡ç»ˆç«¯ç¯å¢ƒ

### ğŸ“Š æ—¥å¿—ç®¡ç†ä¸åˆ†æ

- **æ™ºèƒ½æ—¥å¿—æœç´¢** - åŸºäº Elasticsearch çš„é«˜æ€§èƒ½æŸ¥è¯¢
- **å®æ—¶æ—¥å¿—æµ** - æ”¯æŒå®æ—¶æ—¥å¿—ç›‘æ§å’Œè¿‡æ»¤
- **æ—¥å¿—æ¨¡å¼åˆ†æ** - AI é©±åŠ¨çš„å¼‚å¸¸æ¨¡å¼è¯†åˆ«
- **è‡ªå®šä¹‰ä»ªè¡¨æ¿** - å¯é…ç½®çš„æ—¥å¿—åˆ†æè§†å›¾

### âš™ï¸ åŸºç¡€è®¾æ–½ç®¡ç†

- **Kafka é›†ç¾¤ç®¡ç†**
  - Broker çŠ¶æ€ç›‘æ§å’Œæ€§èƒ½æŒ‡æ ‡
  - Topic ç®¡ç†å’Œæ¶ˆæ¯æµé‡åˆ†æ
  - Consumer Group ç›‘æ§å’Œè´Ÿè½½å‡è¡¡
- **åˆ†æå·¥ä½œæµå¼•æ“** - åŸºäº Vector çš„æ•°æ®å¤„ç†ç®¡é“
- **ç³»ç»Ÿå¥åº·ç›‘æ§** - å¤šç»„ä»¶çŠ¶æ€ç›‘æ§ï¼ˆæ•°æ®åº“ã€OpenSearchã€Kafkaã€Prometheusã€Vectorï¼‰

### ğŸ”§ ç³»ç»ŸåŠŸèƒ½

- **å…¨å±€æœç´¢** - è·¨å¹³å°ç»Ÿä¸€æœç´¢ä½“éªŒ
- **ç”¨æˆ·æƒé™ç®¡ç†** - åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶
- **ç³»ç»Ÿé…ç½®** - çµæ´»çš„å‚æ•°é…ç½®ç•Œé¢
- **åœ¨çº¿å¸®åŠ©æ–‡æ¡£** - é›†æˆå¼ç”¨æˆ·æŒ‡å—

## ğŸš€ æŠ€æœ¯æ ˆ

### å‰ç«¯æ¡†æ¶

- **Next.js 15** - å…¨æ ˆ React æ¡†æ¶ï¼Œæ”¯æŒ App Router
- **React 19** - æœ€æ–°çš„ React ç‰ˆæœ¬ï¼Œæ”¯æŒå¹¶å‘ç‰¹æ€§
- **TypeScript 5** - ç±»å‹å®‰å…¨çš„ JavaScript è¶…é›†

### UI ç»„ä»¶ä¸æ ·å¼

- **Tailwind CSS 4** - åŸå­åŒ– CSS æ¡†æ¶
- **Radix UI** - æ— éšœç¢çš„åº•å±‚ UI ç»„ä»¶
- **Shadcn/ui** - ç°ä»£åŒ–çš„ç»„ä»¶åº“
- **Lucide React** & **Tabler Icons** - ä¸°å¯Œçš„å›¾æ ‡åº“

### æ•°æ®å¤„ç†ä¸å¯è§†åŒ–

- **TanStack Table** - é«˜æ€§èƒ½è¡¨æ ¼ç»„ä»¶
- **Recharts** - React å›¾è¡¨åº“
- **React Hook Form** - é«˜æ€§èƒ½è¡¨å•å¤„ç†
- **Zod** - TypeScript ä¼˜å…ˆçš„æ¨¡å¼éªŒè¯

### é›†æˆä¸è¿æ¥

- **Elasticsearch UI** - æœç´¢ç•Œé¢ç»„ä»¶
- **React DatePicker** - æ—¥æœŸæ—¶é—´é€‰æ‹©å™¨
- **DND Kit** - æ‹–æ‹½åŠŸèƒ½æ”¯æŒ

## ğŸ› ï¸ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

```bash
Node.js >= 18.0.0
pnpm >= 8.0.0 (æ¨è) æˆ– npm >= 9.0.0
```

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**

```bash
git clone ssh://git@git.pku.edu.cn/oslab/sysarmor-manager-ui.git
cd sysarmor-manager-ui
```

2. **å®‰è£…ä¾èµ–**

```bash
pnpm install
```

3. **ç¯å¢ƒé…ç½®**

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env.local

# ç¼–è¾‘ç¯å¢ƒå˜é‡
vim .env.local
```

4. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**

```bash
pnpm dev
```

5. **è®¿é—®åº”ç”¨**
   æ‰“å¼€æµè§ˆå™¨è®¿é—® [http://localhost:3000](http://localhost:3000)

### ç¯å¢ƒå˜é‡é…ç½®

é¡¹ç›®ç›®å‰åªéœ€è¦é…ç½®ä¸€ä¸ªç¯å¢ƒå˜é‡ã€‚åˆ›å»º `.env.local` æ–‡ä»¶ï¼š

```env
# API åŸºç¡€è·¯å¾„é…ç½®ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸º /api/v1ï¼‰
NEXT_PUBLIC_API_BASE_URL=/api/v1
```

**è¯´æ˜**ï¼š

- `NEXT_PUBLIC_API_BASE_URL`: API æœåŠ¡çš„åŸºç¡€è·¯å¾„
  - å¼€å‘ç¯å¢ƒï¼šé€šå¸¸è®¾ç½®ä¸º `/api/v1`ï¼ˆä½¿ç”¨ Next.js API è·¯ç”±ï¼‰
  - ç”Ÿäº§ç¯å¢ƒï¼šå¯è®¾ç½®ä¸ºå®Œæ•´çš„ API æœåŠ¡åœ°å€ï¼Œå¦‚ `https://api.sysarmor.com/v1`
  - å¦‚æœä¸è®¾ç½®ï¼Œé»˜è®¤ä½¿ç”¨ `/api/v1`

## ğŸ“ é¡¹ç›®ç»“æ„

```
sysarmor-manager-ui/
â”œâ”€â”€ app/                          # Next.js App Router
â”‚   â”œâ”€â”€ (dashboard)/             # ä»ªè¡¨æ¿è·¯ç”±ç»„
â”‚   â”‚   â”œâ”€â”€ health/              # ç³»ç»Ÿå¥åº·ç›‘æ§
â”‚   â”‚   â”œâ”€â”€ kafka/               # Kafka ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ brokers/         # Broker ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ topics/          # Topic ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ consumers/       # Consumer ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ logs/                # æ—¥å¿—ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ search/          # æ—¥å¿—æœç´¢
â”‚   â”‚   â”‚   â””â”€â”€ analysis/        # æ—¥å¿—åˆ†æ
â”‚   â”‚   â”œâ”€â”€ opensearch/          # OpenSearch é›†æˆ
â”‚   â”‚   â”‚   â””â”€â”€ alerts/          # å‘Šè­¦ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ terminal-create/     # ç»ˆç«¯åˆ›å»º
â”‚   â”‚   â”œâ”€â”€ terminal-list/       # ç»ˆç«¯åˆ—è¡¨
â”‚   â”‚   â”œâ”€â”€ workflows/           # å·¥ä½œæµç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ create/          # åˆ›å»ºå·¥ä½œæµ
â”‚   â”‚   â”‚   â””â”€â”€ templates/       # å·¥ä½œæµæ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ settings/            # ç³»ç»Ÿè®¾ç½®
â”‚   â”‚   â””â”€â”€ help/                # å¸®åŠ©æ–‡æ¡£
â”‚   â”œâ”€â”€ globals.css              # å…¨å±€æ ·å¼
â”‚   â””â”€â”€ layout.tsx               # æ ¹å¸ƒå±€
â”œâ”€â”€ components/                   # React ç»„ä»¶
â”‚   â”œâ”€â”€ ui/                      # åŸºç¡€ UI ç»„ä»¶
â”‚   â”œâ”€â”€ app-sidebar.tsx          # åº”ç”¨ä¾§è¾¹æ 
â”‚   â”œâ”€â”€ site-header.tsx          # ç«™ç‚¹å¤´éƒ¨
â”‚   â”œâ”€â”€ dashboard.tsx            # ä»ªè¡¨æ¿ç»„ä»¶
â”‚   â”œâ”€â”€ kafka-*.tsx              # Kafka ç›¸å…³ç»„ä»¶
â”‚   â”œâ”€â”€ health-status.tsx        # å¥åº·çŠ¶æ€ç»„ä»¶
â”‚   â””â”€â”€ terminal-*.tsx           # ç»ˆç«¯ç®¡ç†ç»„ä»¶
â”œâ”€â”€ hooks/                       # è‡ªå®šä¹‰ React Hooks
â”œâ”€â”€ lib/                         # å·¥å…·å‡½æ•°å’Œ API
â”‚   â”œâ”€â”€ api.ts                   # API å®¢æˆ·ç«¯
â”‚   â””â”€â”€ utils.ts                 # å·¥å…·å‡½æ•°
â”œâ”€â”€ docs/                        # æ–‡æ¡£
â”‚   â”œâ”€â”€ openapi.json             # API è§„èŒƒ
â”‚   â””â”€â”€ éœ€æ±‚æ–‡æ¡£_v1.md           # éœ€æ±‚æ–‡æ¡£
â””â”€â”€ public/                      # é™æ€èµ„æº
```

## ğŸ® å¯ç”¨è„šæœ¬

```bash
# å¼€å‘
pnpm dev          # å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆä½¿ç”¨ Turbopackï¼‰
pnpm dev:debug    # å¯åŠ¨è°ƒè¯•æ¨¡å¼

# æ„å»º
pnpm build        # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm start        # å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨

# ä»£ç è´¨é‡
pnpm lint         # è¿è¡Œ ESLint æ£€æŸ¥
pnpm lint:fix     # è‡ªåŠ¨ä¿®å¤ ESLint é—®é¢˜
pnpm type-check   # TypeScript ç±»å‹æ£€æŸ¥

# å…¶ä»–
pnpm clean        # æ¸…ç†æ„å»ºæ–‡ä»¶
```

## ğŸ”§ å¼€å‘æŒ‡å—

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ TypeScript è¿›è¡Œç±»å‹å®‰å…¨å¼€å‘
- éµå¾ª ESLint å’Œ Prettier é…ç½®
- ç»„ä»¶ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶å’Œ Hooks
- æ ·å¼ä½¿ç”¨ Tailwind CSS åŸå­ç±»

### ç»„ä»¶å¼€å‘

```tsx
// ç¤ºä¾‹ç»„ä»¶ç»“æ„
"use client";

import { useState } from "react";
import { Button } from "@/components/ui/button";

interface ComponentProps {
  title: string;
  onAction?: () => void;
}

export function ExampleComponent({ title, onAction }: ComponentProps) {
  const [loading, setLoading] = useState(false);

  return (
    <div className="p-4">
      <h2 className="text-lg font-semibold">{title}</h2>
      <Button onClick={onAction} disabled={loading}>
        {loading ? "å¤„ç†ä¸­..." : "æ‰§è¡Œæ“ä½œ"}
      </Button>
    </div>
  );
}
```

### API é›†æˆ

```typescript
// lib/api.ts ä¸­çš„ API è°ƒç”¨ç¤ºä¾‹
export async function fetchSystemHealth(): Promise<HealthData> {
  const response = await fetch(`${API_BASE_URL}/health`);
  if (!response.ok) {
    throw new Error("Failed to fetch health data");
  }
  return response.json();
}
```

## ğŸš€ éƒ¨ç½²æŒ‡å—

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

1. **æ„å»ºåº”ç”¨**

```bash
pnpm build
```

2. **å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨**

```bash
pnpm start
```

### Docker éƒ¨ç½²

```dockerfile
FROM node:18-alpine AS base
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production

FROM node:18-alpine AS build
WORKDIR /app
COPY . .
RUN npm ci && npm run build

FROM node:18-alpine AS runtime
WORKDIR /app
COPY --from=base /app/node_modules ./node_modules
COPY --from=build /app/.next ./.next
COPY --from=build /app/public ./public
COPY --from=build /app/package.json ./package.json

EXPOSE 3000
CMD ["npm", "start"]
```

### ç¯å¢ƒé…ç½®

ä¸åŒç¯å¢ƒçš„é…ç½®æ–‡ä»¶ï¼š

- `.env.local` - æœ¬åœ°å¼€å‘
- `.env.development` - å¼€å‘ç¯å¢ƒ
- `.env.staging` - æµ‹è¯•ç¯å¢ƒ
- `.env.production` - ç”Ÿäº§ç¯å¢ƒ

### æäº¤è§„èŒƒ

```
feat: æ–°åŠŸèƒ½
fix: ä¿®å¤é—®é¢˜
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: ä»£ç é‡æ„
test: æµ‹è¯•ç›¸å…³
chore: æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨
```

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä¸º SysArmor å›¢é˜Ÿçš„ä¸“æœ‰é¡¹ç›®ï¼Œä»…ä¾›æˆæƒç”¨æˆ·ä½¿ç”¨ã€‚

---

<div align="center">
Made with â¤ï¸ by SysArmor Team
</div>
